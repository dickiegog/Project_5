{% extends "base.html" %} {% load static %} {% block content %}
<div class="container">
  <h1 class="mt-4">Edit Profile</h1>

  <!-- Profile Card -->
  <div class="card my-4">
    <div class="row no-gutters">
      <div class="col-md-4 text-center py-4">
        {% if user.userprofile.profile_picture %}
        <!-- Display uploaded profile picture -->
        <img
          src="{{ user.userprofile.profile_picture.url }}"
          class="img-fluid rounded-circle"
          loading="lazy"
          alt="Profile Picture"
          style="max-width: 150px"
        />
        {% else %}
        <!-- Display fallback default image -->
        <img
          src="{% static 'images/no-image.jpeg' %}"
          class="img-fluid rounded-circle"
          loading="lazy"
          alt="Default Profile Picture"
          style="max-width: 150px"
        />

        {% endif %}
        <h5 class="mt-3">{{ user.username }}</h5>
        <div class="form-group">
          <label for="id_profile_picture">Profile Picture</label>
          <input
            type="file"
            name="profile_picture"
            id="id_profile_picture"
            class="form-control"
          />
        </div>
      </div>
      <div class="col-md-8">
        <div class="card-body">
          <h5 class="card-title">Personal Information</h5>
          <form method="POST" enctype="multipart/form-data" class="mt-3">
            {% csrf_token %}
            <!-- User Fields -->
            <div class="form-group">
              <label for="id_first_name">First Name</label>
              <input
                type="text"
                name="first_name"
                id="id_first_name"
                class="form-control"
                value="{{ user_form.instance.first_name }}"
              />
            </div>
            <div class="form-group">
              <label for="id_last_name">Last Name</label>
              <input
                type="text"
                name="last_name"
                id="id_last_name"
                class="form-control"
                value="{{ user_form.instance.last_name }}"
              />
            </div>
            <div class="form-group">
              <label for="id_email">Email</label>
              <input
                type="email"
                name="email"
                id="id_email"
                class="form-control"
                value="{{ user_form.instance.email }}"
              />
            </div>

            <!-- Profile Fields -->
            <div class="form-group">
              <label for="id_bio">Bio</label>
              <textarea name="bio" id="id_bio" class="form-control">
{{ profile_form.instance.bio }}</textarea
              >
            </div>
            <!-- Profile Fields -->
            <div class="form-group">
              <label for="id_address">Address</label>
              <input
                type="text"
                name="address"
                id="id_address"
                class="form-control"
                value="{{ profile_form.instance.address }}"
              />
            </div>
            <div class="form-group">
              <label for="id_city">City</label>
              <input
                type="text"
                name="city"
                id="id_city"
                class="form-control"
                value="{{ profile_form.instance.city }}"
              />
            </div>
            <div class="form-group">
              <label for="id_postal_code">Postal Code</label>
              <input
                type="text"
                name="postal_code"
                id="id_postal_code"
                class="form-control"
                value="{{ profile_form.instance.postal_code }}"
              />
            </div>
            <div class="form-group">
              <label for="id_country">Country</label>
              <input
                type="text"
                name="country"
                id="id_country"
                class="form-control"
                value="{{ profile_form.instance.country }}"
              />
            </div>
            <div class="form-group">
              <label for="id_phone_number">Phone Number</label>
              <input
                type="text"
                name="phone_number"
                id="id_phone_number"
                class="form-control"
                value="{{ profile_form.instance.phone_number }}"
              />
            </div>

            <button type="submit" class="btn btn-success mt-2">
              Save Changes
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Additional Links -->
  <div class="mt-4">
    <a href="{% url 'account_change_password' %}" class="btn btn-primary"
      >Change Password</a
    >
    <a href="{% url 'account_logout' %}" class="btn btn-danger">Logout</a>
  </div>
</div>
{% endblock %}
